<div class="contenedor animate__animated animate__fadeIn">
  <div class="div-titulo">
    <h2 class="titulo">HOME</h2>
  </div>

  <div class="body">
    <div class="welcome-row">
      <div class="header-home">
        <div class="left-space">
          <h1 class="welcome-title">Bienvenido, usuario</h1>
          @if (working) {
            <div class="status-row">
              <span class="chip chip-red">
                <span class="chip-dot"></span>
                Fichado
              </span>
              <span class="status-text">Actualmente estás fichado.</span>
            </div>
          } @else {
            <div class="status-row">
              <span class="chip chip-success">
                <span class="chip-dot"></span>
                Sin Fichar
              </span>
              <span class="status-text">Actualmente no estás fichado.</span>
            </div>
          }
        </div>
        <div class="right-space">
          <h3>Fecha y hora actual:</h3>
          <h4>{{ currentTime() | date: 'HH:mm:ss' }}</h4>
        </div>
      </div>
    </div>

    <div class="grid-home">
      <!-- Card principal -->
      @if (working) {
        <section class="card card-main">
          <div class="card-main-left">
            <div class="metric">
              <div class="metric-label">Hora de entrada</div>
              <div class="metric-value">{{ infoTime }}</div>
            </div>

            <div class="divider"></div>

            <div class="metric">
              <div class="metric-label">Tiempo trabajado</div>
              <div class="metric-value">{{ timerDisplay }}</div>
            </div>
          </div>

          <div class="card-main-right animate__animated animate__pulse">
            <div class="clock-circle">
              <mat-icon class="icono-reloj-rojo">schedule</mat-icon>
            </div>
            <button class="btn-primary-red" type="button" (click)="inOut()">Fichar salida</button>
          </div>
        </section>
      } @else {
        <section class="card card-main">
          <div class="card-main-left">
            <div class="metric">
              <div class="metric-label">Hora de salida</div>
              <div class="metric-value">{{ infoTime }}</div>
            </div>

            <div class="divider"></div>

            <div class="metric">
              <div class="metric-label">Tiempo trabajado</div>
              <div class="metric-value">{{ timerDisplay }}</div>
            </div>
          </div>

          <div class="card-main-right animate__animated animate__pulse">
            <div class="clock-circle">
              <mat-icon class="icono-reloj-verde">schedule</mat-icon>
            </div>
            <button class="btn-primary-green" type="button" (click)="inOut()">
              Fichar Entrada
            </button>
          </div>
        </section>
      }

      <!-- Card derecha: MAPA futuro -->
      <aside class="card card-side">
        <div class="card-head">
          <div>
            <h3 class="card-title">Ubicación</h3>
          </div>
        </div>

        <div class="map-wrap">
          <app-mapa></app-mapa>
        </div>
      </aside>

      <!-- Card abajo: últimos fichajes -->
      <section class="card card-bottom">
        <div class="card-head">
          <div>
            <h3 class="card-title">Últimos fichajes</h3>
            <div class="card-sub">Resumen rápido</div>
          </div>
          <a class="link" href="#">Ver todos</a>
        </div>

        <div class="table">
          <div class="row head">
            <span>Hora entrada</span>
            <span>Hora salida</span>
            <span class="right">Duración</span>
          </div>

          <div class="row">
            <span>08:30 AM</span>
            <span>— 10:45 AM</span>
            <span class="right">2h 15m</span>
          </div>
          <div class="row">
            <span>07:57 AM</span>
            <span>— 05:01 PM</span>
            <span class="right">9h 03m</span>
          </div>
          <div class="row">
            <span>08:32 AM</span>
            <span>— 05:02 PM</span>
            <span class="right">8h 30m</span>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
